<div id="auth-token-container" class="absolute top-0 right-0 mt-6 mr-6 text-white text-lg font-semibold bg-gray-700 px-4 py-2 rounded-full border border-gray-600"></div>

<div class="absolute top-0 left-0 mt-6 ml-6 flex items-center space-x-1">
    <a href="/login" class="text-lg font-semibold hover:text-green-300 text-green-400 transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-gray-700">Login</a>
    <span class="text-gray-500">|</span>
    <a href="/register" class="text-lg font-semibold hover:text-green-300 text-green-400 transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-gray-700">Register</a>
    <span class="text-gray-500">|</span>
    <a id="logout-button" class="text-lg font-semibold hover:text-green-300 text-green-400 transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-gray-700 cursor-pointer">Logout</a>
</div>

<div class="text-center max-w-4xl mx-auto">
    <h1 class="text-6xl font-bold mb-4 bg-gradient-to-r from-blue-400 via-purple-500 to-blue-600 bg-clip-text text-transparent">
        Home
    </h1>
    
    <div class="bg-yellow-900 bg-opacity-30 border border-yellow-600 rounded-lg p-3 mb-8 inline-block">
        <p class="text-yellow-300 text-sm font-medium">
            Note: Currently only Python is supported
        </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
        <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-6 hover:from-blue-500 hover:to-blue-600 transition-all duration-300 transform hover:scale-105">
            <a href="/problems" class="block text-white">
                <div class="flex items-center justify-center mb-3">
                    <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <h2 class="text-3xl font-bold">Problems</h2>
                </div>
                <p class="text-blue-100 mt-2">Solve coding challenges</p>
            </a>
        </div>

        <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-6 hover:from-purple-500 hover:to-purple-600 transition-all duration-300 transform hover:scale-105">
            <a href="/contests" class="block text-white">
                <div class="flex items-center justify-center mb-3">
                    <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 16 16">
                        <rect height="3.5" width="6.5" y="10.75" x="4.75"/>
                        <path d="m8 8.75v2m-3.25-9c-1.5 0-3 .5-3 2.25s1.5 2.25 3 2.25m6.5-4.5c1.5 0 3 .5 3 2.25s-1.5 2.25-3 2.25m-6.5-4.5h6.5v3.5c0 1.5-1 3-3.25 3s-3.25-1.5-3.25-3z"/>
                    </svg>
                    <h2 class="text-3xl font-bold">Contests</h2>
                </div>
                <p class="text-purple-100 mt-2">Compete with others</p>
            </a>
        </div>
    </div>

    <div class="space-y-4">
        <a href="https://codejoint.org/" class="inline-block text-blue-400 hover:text-blue-300 transition-colors duration-200 text-lg font-semibold">
            About Code Joint â†’
        </a>
        
        <div class="bg-gray-700 bg-opacity-50 rounded-lg p-4 max-w-2xl mx-auto">
            <p class="text-gray-300 text-sm">
                Need support, want to delete your account, have feedback, or just curious? 
                <br>Reach out to us at <a class="text-blue-400 font-medium" href="mailto:codejointcrew@gmail.com" target="_blank">codejointcrew@gmail.com</a>
            </p>
        </div>
    </div>
</div>

<script>
    async function loginStatus(){
        const authTokenContainer = document.getElementById('auth-token-container');

        let isLoggedIn = false;
        const response = await fetch("/api/user/valid-token", {
            method: "GET",
            headers: {
                "Content-Type": "application/json"
            }
        });
        console.log(response);
        if (response.ok) {
            isLoggedIn = true;
        }

        if (isLoggedIn) {
            authTokenContainer.textContent = `Logged In`;
            authTokenContainer.classList.add('bg-green-700', 'border-green-600');
        }
        else {
            authTokenContainer.textContent = `Logged Out`;
            authTokenContainer.classList.add('bg-gray-600', 'border-gray-500');
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const logoutButton = document.getElementById('logout-button');
        if (logoutButton) {
            logoutButton.addEventListener('click', async function() {
                await fetch("/api/user/logout", {
                    method: "POST",
                });
                location.reload();
            });
        }
        loginStatus();
    });
</script>